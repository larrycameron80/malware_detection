import os
import array
import imageio
import numpy
import math


def maltoimg(dir, filepath, name):
    filename = filepath
    f = open(filename, 'rb')
    ln = os.path.getsize(filename)
    width = int(math.pow(ln, 0.5))
    rem = ln % width
    a = array.array("B")
    a.fromfile(f, ln-rem)
    f.close()
    g = numpy.reshape(a, (int(len(a)/width), width))
    g = numpy.uint8(g)
    imageio.imwrite(dir + '/' + name + '.png', g)
